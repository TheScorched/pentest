#!/bin/bash

# Point at your host list from network scan out put
live_hosts="./scan_results/live_hosts.txt"

# Check if the live_hosts.txt file exists and is not empty
if [ ! -s "$live_hosts" ]; then
    echo "The file $live_hosts does not exist or is empty. Please run the network and port scan script first."
    exit 1
fi

# Define output directory for vulnerability scans
output_dir="./vuln_scan_results"
mkdir -p "$output_dir"

# Read live hosts from the file and perform a vulnerability scan on each
while IFS= read -r host; do
    echo "Scanning $host for vulnerabilities..."
    nmap -p 1-65535 --script=vuln "$host" -oN "$output_dir/vuln_scan_$host.txt"
done < "$live_hosts"

echo "Vulnerability scanning complete. Results are stored in $output_dir."
